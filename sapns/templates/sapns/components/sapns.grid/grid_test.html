<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
{% import 'sapns/dashboard/util.html' as u %}

{{ u.jquery() }}
{{ u.jquery_ui() }}
{#{{ u.qtip2() }}#}
<link rel="stylesheet" type="text/css" media="screen" href="{{tg.url('/css/style.css')}}">
<script type="text/javascript">
    {% include 'sapns/components/sapns.grid/sapns.grid.js' %}
</script>

</head>
<body>
    <div id="g"></div>
    <script type="text/javascript">
        $(document).ready(function() {
            
            $('#g').sapnsGrid({
                cls: 'grupos',
                //caption: 'Grid test', 
                caption: function() {
                    return 'Grid test (func)';
                },
                q: '',
                rp: 3,
                //q: '',
                //with_search: false,
                search_func: function(q, rp, pos) {
                    var g = this;
                    return {
                        url: "{{tg.url('/dashboard/test_search/')}}",
                        //type: "post",
                        data: {
                            cls: g.cls,
                            q: q,
                            rp: rp,
                            pos: pos
                        },
                        success: function(data) {
                            if (data.status) {
                                g.cols = data.cols;
                                g.data = data.data;
                                g.loadData();
                            }
                        }
                    };
                },
                /*search_func: function(q, rp, pos) {
                    //console.log([q, rp, pos].join(', ')); 
                    return [[1, 1.1, 2.2, 3.3],
                            [2],
                            [222, 111, 211, 311, 411, 511, 611],
                            [33, 11, null, 33]
                           ];
                },*/
                //default_: { col_width: 10, col_align: 'left' },
                cols: [{title: 'id', width: 30}, 
                       {title: 'Úno', align: 'right', width: 100}, 
                       {title: 'đæßß', width: 300}, 
                       {title: 'trEs', align: 'left'},
                       {title: 'CUATRO'}
                       ],
                /*
                data: function() {
                    return [[1, 11, 22, 33],
                            [2],
                            [2.2, 1, 2, 3, 4, 5, 6],
                            [3, 11, null, 33]
                       ];
                },
                */
                actions_: function() {
                    var g = this;
                    return {
                        url: "{{tg.url('/dashboard/actions/')}}",
                        data: {
                            cls: g.cls
                        },
                        success: function(data) {
                        }
                    };
                },
                actions: [{title: 'act1', url: '/act1', type: 'process'},
                          {title: 'act2', url: '/act2', type: 'process'},
                          {title: 'act3', url: '/act3', type: 'process'}
                          ],
                actions_: function() {
                    //console.log(this.cls);
                    return [{title: 'New', url: '/act1', type: 'new'},
                            {title: 'Edit', url: '/act2', type: 'edit'},
                            {title: 'Delete', url: '/act3', type: 'delete'},
                            {title: 'act4_f',
                             type: {
                                 id:'act4_f', 
                                 f: function(id) {
                                     alert('act4_f: hooola! ' + id);
                                 }
                             }
                            },
                            {title: 'act5_f',
                             type: {
                                 id:'act5_f',                                    
                                 f: function(id) {
                                     alert('act5_f: byyyyyye! ' + id);
                                 }
                             },
                             require_id: false
                            }
                           ]
                },
                exportable: true
            });
        }); //.sapnsGrid('search');
        
        //$('#g').sapnsGrid('search');
    </script>
</body>
</html>