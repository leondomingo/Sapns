(function(d){function a(e){this.field=e.field.trim();this.operator=e.operator;this.value=e.value.trim();
this.active=e.active?e.active!==undefined:true}a.prototype={tip:function(){var e=this;
return sprintf('&lt;%s&gt; %s "%s"',e.field,e.operator_title().toLowerCase(),e.value)
},operator_title:function(){var e={co:"Contiene",eq:"Igual a",lt:"Menor que",gt:"Mayor que",let:"Menor o igual que",get:"Mayor o igual que",nco:"No contiene",neq:"Distinto"};
return e[this.operator]},toggle:function(){if(this.active){this.active=false}else{this.active=true
}},toString:function(){var f=this;var h=f.field.toLowerCase().trim();h=h.replace(/[áäà]/g,"a");
h=h.replace(/[éëè]/g,"e");h=h.replace(/[íïì]/g,"i");h=h.replace(/[óöò]/g,"o");h=h.replace(/[úüù]/g,"u");
h=h.replace(/[^a-z]/g,"");var g={co:"=",eq:"=",lt:"<",gt:">",let:"<=",get:">=",nco:"<>",neq:"<>"};
var i=g[f.operator];var e=f.value;if(f.operator=="eq"||f.operator=="neq"){if(e){e=sprintf('"%s"',e)
}else{if(f.operator=="eq"){return sprintf("!%s",h)}else{if(f.operator=="neq"){return sprintf("#%s",h)
}}}}else{if((f.operator=="co"||f.operator=="nco")&&!e){if(f.operator=="co"){return sprintf("!%s",h)
}else{if(f.operator=="nco"){return sprintf("#%s",h)}}}}return sprintf("%s%s%s",h,i,e)
}};function c(e){this.field=e.field;this.type=e.type}c.prototype={toString:function(){var e=this;
if(e.type=="asc"){type="+"}else{if(e.type=="desc"){type="-"}}var f=e.field.toLowerCase().trim();
f=f.replace(/[áäà]/g,"a");f=f.replace(/[éëè]/g,"e");f=f.replace(/[íïì]/g,"i");f=f.replace(/[óöò]/g,"o");
f=f.replace(/[úüù]/g,"u");f=f.replace(/[^a-z]/g,"");return sprintf("%s%s",type,f)
}};function b(f){function g(h,i,j,l){if(l==undefined){l=f}if(l[i]==undefined){h[i]=j
}else{h[i]=l[i]}return}g(this,"caption","");if(typeof(this.caption)=="function"){this.caption=this.caption()
}g(this,"name","grid_"+Math.floor(Math.random()*999999));g(this,"cls","");g(this,"with_search",true);
g(this,"search_params",{});g(this,"show_ids",false);g(this,"link","");g(this,"q","");
g(this,"ch_attr","");g(this,"parent_id","");g(this,"cols",[]);g(this,"data",{});g(this,"height",500);
g(this,"url_base","");g(this,"multiselect",false);g(this,"actions_inline",false);
g(this,"hide_check",false);g(this,"hide_id",false);g(this,"dblclick",null);g(this,"select_first",false);
g(this,"onLoad",null);g(this,"default_",{});g(this.default_,"col_width",60,this.default_);
g(this.default_,"col_align","center",this.default_);g(this.default_,"empty_value","",this.default_);
g(this,"actions",null);if(typeof(this.actions)=="function"){this.actions=this.actions()
}g(this,"shift_enabled",false);g(this,"_new_default",{name:"new",url:"/dashboard/new/",require_id:"false",type:"new"});
g(this,"_edit_default",{name:"edit",url:"/dashboard/edit/",require_id:"true",type:"edit"});
g(this,"_delete_default",{name:"delete",url:"/dashboard/delete/",require_id:"true",type:"delete"});
g(this,"_docs_default",{name:"docs",url:"/dashboard/docs/",require_id:"true",type:"docs"});
g(this,"exportable",true);var e=[{id:"csv",title:"CSV",url:"{{tg.url('/dashboard/tocsv')}}"},{id:"excel",title:"Excel",url:"{{tg.url('/dashboard/toxls')}}"}];
g(this,"exportable_formats",e);g(this,"with_pager",true);g(this,"pag_n",1);g(this,"rp",10);
g(this,"this_page",0);g(this,"total_count",0);g(this,"total_pag",0);this.ajx_data="{}";
this.filters=[];this.order=[]}b.prototype.getSelectedIds=function(){var e=this;var f=[];
d("#"+e.name+" .sp-grid-row").each(function(){var g=d(this).find(".sp-grid-rowid");
if(g.attr("checked")==true){f.push(g.attr("id_row")*1)}});return f};b.prototype.getAction=function(j){var g=this;
for(var h=0,f=g.actions.length;h<f;h++){var e=g.actions[h];if(typeof(e.type)=="object"){if(e.type.id==j){return e
}}else{if(e.name==j){return e}}}};b.prototype.getRow=function(g){var e=this;var f=null;
d("#"+e.name+" .sp-grid-row").each(function(){var h=d(this).find(".sp-grid-rowid");
if(h.attr("id_row")==g){f=h.parent();return}});return f};b.prototype.loadData=function(r){var C=this;
var A=C.cols;if(typeof(A)=="function"){A=A()}var t=23;if(C.hide_check){t=-6}var q=A.length*42;
if(!C.hide_check){q+=23}if(!C.hide_id){q+=60}var f=905;if(q<f){q=f}var y="";for(var M=0,I=A.length;
M<I;M++){var s=A[M];if(s.title!="id"){y+='<option value="'+s.title+'">'+s.title+"</option>"
}if(C.hide_id&&s.title=="id"){continue}t+=(s.width+5)}d("#"+C.name+" .sp-grid-filter-field").html(y);
var N='<div class="sp-grid" style="width:'+(t+5)+'px;">';var g='<div class="sp-grid-row" style="width:'+q+'px;">';
if(!C.hide_check){g+='<div class="sp-col-title" style="width:23px;">                <input class="sp-grid-select-all" type="checkbox"></div>'
}if(C.actions_inline){g+='<div class="sp-col-title" style="%(actions_wd)s">*</div>'
}var D={};for(var M=0,I=C.order.length;M<I;M++){var F=C.order[M];F.index=M+1;D[C.order[M].field]=F
}for(var M=0,I=A.length;M<I;M++){var s=A[M];var z=s.width;if(!z){z=C.default_.col_width
}if(C.hide_id&&s.title=="id"){continue}var p="";var Q="";var B="";if(D[s.title]){var F=D[s.title];
p="sp-grid-ordered-col";Q=' order_type="'+F.type+'"';var v;if(F.type==="asc"){v="+"
}else{v="-"}B=" ("+F.index+v+")"}g+='<div class="sp-col-title sp-col-title-sortable '+p+'"'+Q+' style="width:'+z+'px;" col_title="'+s.title+'">'+s.title+B+"</div>\n"
}g+="</div>";var R=C.data;if(typeof(R)=="function"){R=R()}var E=R.length;if(E>0){for(var M=0;
M<E;M++){var u=R[M];var m='<div class="sp-grid-row" style="width:'+q+'px;">';if(!C.hide_check){var L="";
if(M==E-1){L="border-radius:0 0 0 5px;"}m+='<div class="sp-grid-cell" title="'+u[0]+'" style="width:23px;'+L+'">                        <input class="sp-grid-rowid" type="checkbox" id_row="'+u[0]+'"></div>'
}if(C.actions_inline){var e="width:107px;";if(!C.nonstd){e="width:75px;"}var x='style="padding:2px;margin-left:5px;margin-right:5px;border:1px solid lightgray;"';
var P='<div class="sp-grid-cell" style="%(actions_wd)s">                        <img class="inline_action edit_inline" title="{{_("Edit")}}"                             src="{{tg.url("/images/sapns/icons/edit.png")}}">                        <img class="inline_action delete_inline" title="{{_("Delete")}}"                             src="{{tg.url("/images/sapns/icons/delete.png")}}">                        <img class="inline_action docs_inline" title="{{_("Docs")}}"                             src="{{tg.url("/images/sapns/icons/docs.png")}}">';
m+=sprintf(P,{actions_wd:e})+C.nonstd+"\n";m+="</div>\n"}if(M==0){N+=sprintf(g,{actions_wd:e})
}for(var K=0,w=A.length;K<w;K++){var s=A[K];var J=s.align;if(!J){J=C.default_.col_align
}var z=s.width;if(!z){z=C.default_.col_width}var h=u[K];if(!h){h=C.default_.empty_value
}if(C.hide_id&&s.title=="id"){continue}var H="";if(z>0){H=" width:"+z+"px;"}var L="";
if((C.hide_check&&M==E-1)&&(!C.hide_id&&K==0||C.hide_id&&K==1)){L="border-radius:0 0 0 5px;"
}if(M==E-1&&K==w-1){L="border-radius:0 0 5px 0;"}m+='<div class="sp-grid-cell sp-grid-cell-tip" style="text-align:'+J+";"+H+L+'"';
if(h){m+=sprintf('title="%s"',h.replace(/"/gi,"''"))}else{m+='title="({{_("empty")}})"'
}m+='clickable="true">'+h+"</div>\n"}m+="</div>";N+=m}}else{var G=1;var O=t;if(C.actions_inline){G=3;
O+=25}N+=sprintf(g,{actions_wd:e})+'<div class="sp-grid-row">                    <div class="sp-grid-cell sp-grid-noresults" title="{{_("No results")}}"                         style="width:'+O+'px;" >{{_("No results")}}</div>                </div>'
}N+="</div>";d("#"+C.name).find(".sp-grid-parent").html(N);d(".sp-col-title-sortable").disableSelection();
if(C.select_first&&C.with_search&&C.q&&E<5&&E>0){d("#"+C.name+" .sp-grid-rowid:first").attr("checked",true)
}if(r){r()}};b.prototype.search=function(e,f,o){var p=this;if(f==undefined){f=false
}if(e==undefined){e=p.q}if(p.q!=e||f){p.pag_n=1}p.q=e;p.filters_tip();var g=[];for(var m=0,j=p.filters.length;
m<j;m++){if(p.filters[m].active){g.push(p.filters[m])}}if(g.length){if(e){e=e+", "+g.join(", ")
}else{e=p.filters.join(", ")}}if(p.order.length){if(e){e=e+", "+p.order.join(", ")
}else{e=p.order.join(", ")}}var h='<div style="padding:10px;font-size: 15px;            '+sprintf('font-weight:bold;color:gray;height:%(hg)dpx;">{{_("Loading")}}...</div>',{hg:p.height-50});
d("#"+p.name).find(".sp-grid-parent").html(h);var r=d.extend(true,{url:"{{tg.url('/dashboard/grid/')}}",data:{cls:p.cls,q:e,rp:p.rp,pag_n:p.pag_n,ch_attr:p.ch_attr,parent_id:p.parent_id},success:function(l){if(l.status){if(l.this_page){p.this_page=l.this_page
}if(l.total_count){p.total_count=l.total_count}if(l.total_pag){p.total_pag=l.total_pag
}if(l.cols){p.cols=l.cols}if(l.actions){p.actions=l.actions}var v=(p.pag_n-1)*p.rp*1;
var u={curr_page:p.pag_n*1,total_page:p.total_pag*1,pos0:v+1,pos1:v+p.this_page};
var s=sprintf("{{_('Page %(curr_page)d of %(total_page)d / Showing rows %(pos0)d to %(pos1)d')}}",u);
d("#"+p.name+" .sp-grid-first-page").attr("title","{{_('page 1')}}");if(u.curr_page>1){var i=sprintf("{{_('page %(p)d')}}",{p:u.curr_page-1});
d("#"+p.name+" .sp-grid-page-back").attr("title",i).attr("disabled",false)}else{d("#"+p.name+" .sp-grid-page-back").attr("disabled",true)
}if(u.curr_page<u.total_page){var t=sprintf("{{_('page %(p)d')}}",{p:u.curr_page+1});
d("#"+p.name+" .sp-grid-page-forth").attr("title",t).attr("disabled",false)}else{d("#"+p.name+" .sp-grid-page-forth").attr("disabled",true)
}var q=sprintf("{{_('page %(p)d')}}",{p:u.total_page});d("#"+p.name+" .sp-grid-last-page").attr("title",q);
d("#"+p.name+" .sp-grid-pager-desc").html(s);d("#"+p.name+" .sp-grid-current-page").val(p.pag_n);
p.data=l.data;p.loadData(function(){d(".sp-grid-cell-tip, .edit_inline, .delete_inline, .docs_inline, .new_inline").qtip({content:{text:true},position:{my:"top left",at:"bottom center"},style:"ui-tooltip-rounded"})
});if(o){o(l)}if(p.onLoad){p.onLoad(l)}}}},p.search_params);var n=JSON.stringify(r.data);
if(p.ajx_data){if(p.ajx_data===n&&!f){p.loadData()}else{d.ajax(r)}}p.ajx_data=n};
b.prototype.warningSelectedId=function(){var e=this;d("#grid-dialog_"+e.name).html("<p style='text-align:center;font-style:italic;'>{{_('You must select a row before click on this action')}}</p>").dialog({title:e.caption,resizable:false,height:155,width:450,modal:true,draggable:false,buttons:{"{{_('Close')}}":function(){d("#grid-dialog_"+e.name).dialog("close")
}}});d(".ui-icon-closethick").hide()};b.prototype._loadActions=function(g){var t=this;
var r="";t.nonstd="";var n='<button id="%(id)s" class="sp-grid-button-action">%(title)s</button>';
var s='<option value="%(id)s">%(title)s</option>';if(g.length>0){r="";for(var h=0,e=g.length;
h<e;h++){var p=g[h];var j=p.require_id;if(j===undefined){j=true}if(typeof(p.type)==="string"&&p.type==="new"){var o='<img class="inline_action new_inline"                         title="{{_("New")}}" src="{{tg.url("/images/sapns/icons/new.png")}}">';
d("#"+t.name+" .sp-grid-search-box").append(o)}else{if(!t.actions_inline){d("#"+t.name+" .sp-grid-button-actions").show();
var v;if(typeof(p.type)=="object"){v={id:p.type.id,title:p.title}}else{v={id:p.name,title:p.title}
}d("#"+t.name+" .sp-grid-button-actions").append(sprintf(n,v))}else{if(t.actions_inline){if(typeof(p.type)==="string"&&(p.type=="edit"||p.type=="delete"||p.type=="docs")){continue
}else{var f;if(typeof(p.type)=="object"){f={id:p.type.id,title:p.title}}else{f={id:p.name,title:p.title}
}t.nonstd+=sprintf(s,f)}}}}}if(t.nonstd){t.nonstd='<select class="nonstd_actions"><option value=""></option>'+t.nonstd+"</select>"
}}if(t.exportable){var q=t.exportable_formats;if(typeof(t.exportable)=="object"){q=t.exportable.formats
}var e=q.length;if(e>0){var u="";for(var h=0;h<e;h++){u+='<option value="'+q[h].id+'">'+q[h].title+"</option>"
}var m='<div id="grid-export_'+t.name+'" style="height:25px;float:left;">                    <select id="select-export" class="sp-button sp-grid-action" style="height:20px;">                    <option value="">({{_("Export")}})</option>                    '+u+"</select></div>";
d("#"+t.name+" .sp-grid-search-box").append(m)}}return r};b.prototype.complete_actions=function(){var g=this;
for(var h=0,f=g.actions.length;h<f;h++){var e=g.actions[h];if(typeof(e.type)==="string"){if(e.type==="new"){g.actions[h]=d.extend(g._new_default,e)
}else{if(e.type==="edit"){g.actions[h]=d.extend(g._edit_default,e)}else{if(e.type==="delete"){g.actions[h]=d.extend(g._delete_default,e)
}else{if(e.type==="docs"){g.actions[h]=d.extend(g._docs_default,e)}}}}}}};b.prototype.loadActions=function(){var h=this;
var f="";if(h.actions!=null){if(h.actions.length===undefined){var e=d.extend(true,{url:"{{tg.url('/dashboard/grid_actions/')}}",type:"post",data:{cls:h.cls},success:function(l){if(l.status){h.actions=l.actions
}d("#"+h.name+" .actions").html(h._loadActions(h.actions))}},h.actions);d.ajax(e)
}else{d("#"+h.name+" .actions").html(h._loadActions(h.actions))}}d("#"+h.name+" .sp-grid-cell").live("click",function(m){if(d(this).attr("clickable")=="true"){d("#"+h.name+" .sp-grid-select-all").attr("checked",false);
var l=d(this).parent().find(".sp-grid-rowid");d("#"+h.name+" .sp-grid-rowid").each(function(){var n=m.ctrlKey||m.metaKey;
if(d(this)!=l&&!h.multiselect&&!n){d(this).attr("checked",false)}});if(l.attr("checked")==true){l.attr("checked",false)
}else{l.attr("checked",true)}}});function j(n,o){var l="";if(o!="_blank"){var l=h.url_base+"?q="+encodeURI(h.q).replace("-","%2D","g").replace('"',"%22","g").replace("+","%2B","g").replace("#","%23","g")+"&rp="+h.rp+"&pag_n="+h.pag_n+"&ch_attr="+h.ch_attr+"&parent_id="+h.parent_id
}var m='<form type="post" action="'+n+'" target="'+o+'">                    <input type="hidden" name="came_from" value="'+l+'">';
if(h.ch_attr){m+='<input type="hidden" name="_'+h.ch_attr+'" value="'+h.parent_id+'">'
}m+="</form>\n";return m}function g(s,o,n,p,m){if(typeof(n.type)==="string"){if(m&&h.shift_enabled){if(n.type==="new"){n=h._new_default
}else{if(n.type==="edit"){n=h._edit_default}else{if(n.type==="delete"){n=h._delete_default
}else{if(n.type==="docs"){n=h._docs_default}}}}}var l=n.url;if(l[l.length-1]!="/"){l+="/"
}var q="";if(p){q="_blank"}if(n.type=="process"){if(n.require_id){if(s){l+=s}else{h.warningSelectedId();
return}}else{if(s){l+=s}}}else{if(n.type=="new"){l+=sprintf("%s/",h.cls)}else{if(n.type=="delete"){h.std_delete(o,n.url);
return}else{if(n.require_id){if(s){l+=sprintf("%s/%s",h.cls,s)}else{h.warningSelectedId();
return}}else{if(s){l+=sprintf("%s/%s",h.cls,s)}else{l+=sprintf("%s/",h.cls)}}}}}d(j(l,q)).appendTo("body").submit().remove()
}else{var r=o;if(n.require_id){if(r.length>0){n.type.f(r[0],r)}else{h.warningSelectedId();
return}}else{if(r.length>0){n.type.f(r[0],r)}else{n.type.f()}}}}function i(n,p,o,m){var l=h.getAction(p);
var q=n.parent().parent().find(".sp-grid-rowid").attr("id_row");g(q,[],l,o,m)}d("#"+h.name+" .new_inline").live("click",function(l){i(d(this),"new",l.ctrlKey||l.metaKey,l.shiftKey)
});if(h.actions_inline){d("#"+h.name+" .edit_inline").live("click",function(l){i(d(this),"edit",l.ctrlKey||l.metaKey,l.shiftKey)
});d("#"+h.name+" .delete_inline").live("click",function(n){var m=h.getSelectedIds();
if(m.length==0){var o=d(this).parent().parent().find(".sp-grid-rowid").attr("id_row");
m=[o]}var l=h.getAction("delete");h.std_delete(m,l.url)});d("#"+h.name+" .docs_inline").live("click",function(l){i(d(this),"docs",false,l.shiftKey)
});d("#"+h.name+" .nonstd_actions").live("change",function(m){var l=d(this).val();
if(l){i(d(this),l)}})}else{d("#"+h.name+" .sp-grid-button-action").live("click",function(m){var l=h.getAction(d(this).attr("id"));
var n=h.getSelectedIds();g(n[0],n,l,m.ctrlKey||m.metaKey,m.shiftKey)})}d("#grid-export_"+h.name).live("change",function(){var o=d("#grid-export_"+h.name+" option:selected").val();
if(o==""){return}var m=h.exportable_formats;var t="";if(typeof(h.exportable)=="object"){m=h.exportable.formats;
if(h.exportable.data){for(k in h.exportable.data){var p=h.exportable.data[k];if(typeof(p)=="function"){p=p()
}t+='<input type="hidden" name="'+k+'" value="'+p+'">'}}}var r="";for(var s=0,n=m.length;
s<n;s++){if(m[s].id==o){r=m[s].url;break}}var q='<form action="'+r+'" method="get">                <input type="hidden" name="cls" value="'+h.cls+'">                <input type="hidden" name="q" value="'+h.q+'">                <input type="hidden" name="ch_attr" value="'+h.ch_attr+'">                <input type="hidden" name="parent_id" value="'+h.parent_id+'">                '+t+"</form>";
d(q).appendTo("body").submit().remove();d(this).find("option:first").attr("selected",true)
})};b.prototype.std_delete=function(i,h){var g=this;var f=g.cls;var m=JSON.stringify(i);
var j="<p id='delete-question'>{{_('Do you really want to delete this record?')}}</p>               <p id='object-title'></p>";
var e="<p id='delete-error-title'>{{_('Oops, something went wrong...')}}</p>                <div id='delete-error-message'></div>";
d("#grid-dialog_"+g.name).html(j);var l="";d.ajax({url:"{{tg.url('/dashboard/title')}}",type:"get",dataType:"json",data:{cls:f,id:m},success:function(n){if(n.status){var o;
if(typeof(n.title)=="string"){o=n.title}else{o=n.title.join(" | ")}d("#grid-dialog_"+g.name+" #object-title").html(o)
}},error:function(){}});d("#grid-dialog_"+g.name).dialog({width:650,height:210,resizable:false,modal:true,title:"{{_('Delete')}}",buttons:{"{{_('Ok')}}":function(){d.ajax({url:h,data:{cls:f,id_:m},success:function(o){if(o.status){g.search(g.q,true);
d("#grid-dialog_"+g.name).dialog("close")}else{d("#grid-dialog_"+g.name).dialog("close");
var p="<p style='color:gray;'>"+o.message+"</p>";if(o.rel_tables!=undefined&&o.rel_tables.length>0){p+="<div>{{_('For your information this object is related with other objects in the following classes:')}}</div>";
p+="<ul>";for(var n=0;n<o.rel_tables.length;n++){var r=o.rel_tables[n].class_title;
var q=o.rel_tables[n].attr_title;p+='<li><span style="font-weight:bold;">'+r+'</span>                                                (<span style="color:gray;">'+q+"</span>)</li>"
}p+="</ul>"}d("#grid-dialog_"+g.name).html(e).find("#delete-error-message").html(p);
d("#grid-dialog_"+g.name).dialog({width:700,height:250,buttons:{"{{_('Close')}}":function(){d("#grid-dialog_"+g.name).dialog("close")
}}})}},error:function(){d("#grid-dialog_"+g.name).dialog("close");d("#grid-dialog_"+g.name).html(e).dialog({buttons:{"{{_('Close')}}":function(){d("#grid-dialog_"+g.name).dialog("close")
}}})}})},"{{_('Cancel')}}":function(){d("#grid-dialog_"+g.name).dialog("close")}}})
};b.prototype.selectAll=function(e){var f=this;if(e===undefined){e=true}d("#"+f.name+" .sp-grid-rowid").attr("checked",e)
};b.prototype.filters_tip=function(){var e=this;d("#"+e.name+" .sp-search-btn").qtip({content:{text:function(){var h="";
if(e.filters.length){for(var g=0,f=e.filters.length;g<f;g++){h+=e.filters[g].tip()+"<br>"
}}else{h="No hay filtros"}return h}},position:{at:"top right",my:"bottom left"},style:"ui-tooltip-rounded"});
if(e.filters.length){d("#"+e.name+" .sp-search-btn").css("border-color","orange")
}else{d("#"+e.name+" .sp-search-btn").css("border-color","")}};d.fn.sapnsGrid=function(o,l,j){if(typeof(o)=="object"){var n=new b(o);
this.data("sapnsGrid",n);var u="#"+n.name;this.append(sprintf('<div id="grid-dialog_%(name)s" style="display:none;"></div>',{name:n.name}));
var x="";x+=sprintf('<div class="sp-grid-container" id="%(name)s" cls="%(cls)s">',{name:n.name,cls:n.cls});
if(n.caption){x+=sprintf('<div class="sp-grid-caption">%(caption)s</div>',{caption:n.caption})
}if(n.with_search){x+='<div><div class="sp-grid-search-box">                        <input class="sp-search-txt" style="float:left;" name="q" type="text" value="">                        <img class="inline_action sp-search-btn"                             src="{{tg.url("/images/sapns/icons/search.png")}}" titlee="{{_("Search...")}}"></div>';
x+='<div class="sp-grid-filters" style="display:none;"></div>';x+='<div class="sp-grid-edit-filter" style="display:none;">                    <div style="float:left;height:40px;margin-right:5px;">                        <div>Campo</div>                        <div><select class="sp-grid-filter-field"></select></div>                    </div>                    <div style="float:left;height:40px;margin-right:5px;">                        <div>Operador</div>                        <div>                            <select class="sp-grid-filter-operator">                                <option value="co">Contiene</option>                                <option value="eq">Igual</option>                                <option value="lt">Menor que</option>                                <option value="gt">Mayor que</option>                                <option value="let">Menor o igual que</option>                                <option value="get">Mayor o igual que</option>                                <option value="nco">No contiene</option>                                <option value="neq">Distinto</option>                            </select>                        </div>                    </div>                    <div style="float:left;height:40px;">                        <div>Valor</div>                        <input class="sp-grid-filter-value" type="text">                    </div>                    </div>';
d(".sp-grid-activate-filter, .sp-grid-deactivate-filter").live("click",function(){var g=d(this).parent().attr("filter_order");
var q=n.filters[g];if(q.active){d(this).removeClass("sp-grid-deactivate-filter").addClass("sp-grid-activate-filter");
d(this).text("Activar")}else{d(this).addClass("sp-grid-deactivate-filter").removeClass("sp-grid-activate-filter");
d(this).text("Desactivar")}d(this).addClass("sp-grid-filter-changed");q.toggle()});
d(u+" .sp-search-btn").live("click",function(){function q(){var B="",y=n.filters.length;
if(y){for(var A=0;A<y;A++){var C=n.filters[A];var z="";if(C.active){z='<button class="sp-grid-deactivate-filter">Desactivar</button>'
}else{z='<button class="sp-grid-activate-filter">Activar</button>'}B+='<div class="sp-grid-row-filter" style="clear:left;" filter_order="'+A+'">                                    <div style="float:left;margin-right:10px;"><input class="sp-grid-check-filter" type="checkbox"></div>                                    <div class="sp-grid-filter-description">&lt;'+C.field+"&gt; "+C.operator_title().toLowerCase()+' <span style="font-style:italic;">"'+C.value+'"</span></div>                                    '+z+"</div>"
}}else{B='<p class="sp-grid-no-filters">No hay filtros</p>'}d(u+" .sp-grid-filters").html(B)
}q();function g(y,z){d("<div/>").html(d(u+" .sp-grid-edit-filter").html()).dialog({title:"Editar filtro",modal:true,resizable:false,width:700,height:150,open:function(){if(y){d(this).find(".sp-grid-filter-field").val(y.field);
d(this).find(".sp-grid-filter-operator").val(y.operator);d(this).find(".sp-grid-filter-value").val(y.value)
}},buttons:{Aceptar:function(){var A=this;if(!y){y=new a({field:d(this).find(".sp-grid-filter-field").val(),operator:d(this).find(".sp-grid-filter-operator").val(),value:d(this).find(".sp-grid-filter-value").val()});
n.filters.push(y)}else{y.field=d(this).find(".sp-grid-filter-field").val();y.operator=d(this).find(".sp-grid-filter-operator").val();
y.value=d(this).find(".sp-grid-filter-value").val()}n.search(d(u+" .sp-search-txt").val(),true);
d(this).dialog("close");if(z){z()}},Cancelar:function(){d(this).dialog("close")}}})
}d("<div/>").html(d(u+" .sp-grid-filters").html()).dialog({title:"Filtros",modal:true,resizable:false,width:600,height:300,closeOnEscape:false,open:function(){var y=d(this);
g(null,function(){y.dialog("close")})},buttons:{"Añadir":function(){var y=d(this);
g(null,function(){y.dialog("close")})},Editar:function(){var y=d(this).find(".sp-grid-row-filter input[type=checkbox]:visible:checked:first").parent().parent().attr("filter_order");
var z=d(this);g(n.filters[y],function(){z.dialog("close")});n.search(d(u+" .sp-search-txt").val(),true)
},Borrar:function(){var A=[];d(this).find(".sp-grid-row-filter input[type=checkbox]:visible:checked").each(function(){A.push(d(this).parent().parent().attr("filter_order")*1)
});A=A.reverse();for(var z=0,y=A.length;z<y;z++){n.filters.splice(A[z],1)}n.search(d(u+" .sp-search-txt").val(),true);
d(this).dialog("close")},"Borrar todos":function(){n.filters=[];n.search(d(u+" .sp-search-txt").val(),true);
d(this).dialog("close")},Cerrar:function(){if(d(".sp-grid-filter-changed").length){d(".sp-grid-filter-changed").removeClass("sp-grid-filter-changed");
n.search(d(u+" .sp-search-txt").val(),true)}d(this).dialog("close")}}})});d(u+" .sp-search-txt").live("keypress",function(g){if(g.which==13){n.search(d(this).val())
}});if(n.link){x+="<div style=\"padding-left:20px;\"><button id='link-shortcut' class='sp-button' style='float:left;'>{{_('Create a shortcut')}}</button><div style=\"font-size:9px;margin-top:7px; width:100px;float:left;\"><a id='this-search' href='"+n.link+"' target='_blank'>[{{_('this search')}}]</a></div><div id=\"link-shortcut-dialog\" style=\"display:none;\"><p>{{_('Do you want to create a shortcut for this search?')}}</p><label>{{_('Shortcut title')}}:</label><input id='link-shortcut-title' type='text' value='({{_('title')}})'></div></div>"
}x+="</div>"}var s='<div class="sp-grid-parent" style="overflow:auto;clear:left;                    height:'+(n.height+5)+'px;background-color:transparent;"></div>';
var h="";if(n.with_pager){h+='<div class="sp-grid-pager">                    <div class="sp-grid-pager-desc"></div>';
var r="",i="",w="",t="";var f=" selected";var m="";if(n.rp==10){r=f}else{if(n.rp==50){i=f
}else{if(n.rp==100){w=f}else{if(n.rp==0){t=f}else{m='<option value="'+n.rp+'" selected>'+n.rp+"</option>"
}}}}h+='<div style="float:left;clear:right;height:25px;margin-top:2px;">                        <select class="sp-button sp-grid-rp">'+m+'<option value="10"'+r+'>10</option>                        <option value="50"'+i+'>50</option>                        <option value="100"'+w+'>100</option>                        <option value="0"'+t+'>{{_("All")}}</option>                        </select>                        <button class="sp-button sp-grid-first-page" style="float:left;">|&lt;&lt;</button>                        <button class="sp-button sp-grid-page-back" style="float:left;">&lt;&lt;</button>                        <input class="sp-grid-current-page" type="text" style="text-align:center;font-size:11px;margin-top:3px;" readonly>                        <button class="sp-button sp-grid-page-forth" style="float:left;">&gt;&gt</button>';
h+="</div>";d(u+" .sp-grid-select-all").live("click",function(){var g=d(this).attr("checked");
n.selectAll(g)});d(u+" .sp-grid-rp").live("change",function(){n.rp=d(this).val();
n.pag_n=1;n.search(n.q)});d(u+" .sp-grid-first-page").live("click",function(){n.pag_n=1;
n.search(n.q)});d(u+" .sp-grid-page-back").live("click",function(){if(n.pag_n>1){n.pag_n-=1;
n.search(n.q)}});d(u+" .sp-grid-page-forth").live("click",function(){if(n.pag_n<n.total_pag){n.pag_n*=1;
n.pag_n+=1;n.search(n.q)}});d(u+" .sp-grid-last-page").live("click",function(){n.pag_n=n.total_pag;
n.search(n.q)});d(u+" .sp-col-title-sortable").live("click",function(A){var C=d(this).attr("col_title");
var q=A.shiftKey;var B=A.ctrlKey||A.metaKey;if(d(this).hasClass("sp-grid-ordered-col")){var z;
if(d(this).attr("order_type")=="asc"){z="desc"}else{z="asc"}if(q){for(var y=0,g=n.order.length;
y<g;y++){if(n.order[y].field===C){break}}n.order[y].type=z}else{if(!B){if(n.order.length>1){z="asc"
}var D=new c({field:C,type:z});n.order=[D]}else{for(var y=0,g=n.order.length;y<g;
y++){if(n.order[y].field===C){break}}n.order.splice(y,1);d(this).removeClass("sp-grid-ordered-col")
}}}else{var D=new c({field:C,type:"asc"});if(q){n.order.push(D)}else{n.order=[D]}}n.search(undefined,true)
})}var p='<div class="sp-grid-button-actions" style="display: none;"></div>';this.append(x+p+s+h+"</div>");
n.loadActions();d(u+" .sp-search-txt").val(n.q);n.search(n.q)}else{if(typeof(o)=="string"){var v=this.data("sapnsGrid");
var u="#"+v.name;if(o=="loadData"){v.loadData()}else{if(o=="search"){var e="";if(typeof(l)=="boolean"){e=v.q
}else{if(l){e=l}}if(v.with_search){d(u+" .sp-search-txt").val(e)}v.search(e,true,j)
}else{if(o=="getSelectedIds"){return v.getSelectedIds()}else{if(o=="setRp"){v.rp=l;
d(u+" .sp-grid-rp [value="+l+"]").attr("selected",true)}else{if(o=="selectAll"){v.selectAll()
}}}}}}}return this}})(jQuery);